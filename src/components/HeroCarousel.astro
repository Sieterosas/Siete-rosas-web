---
// src/components/HeroCarousel.astro
export interface Props {
  images: string[];     // rutas tipo "/hero/hero1.jpg"
  interval?: number;    // ms, por defecto 5000
}
const { images = [], interval = 5000 } = Astro.props;
const id = "carousel-" + Math.random().toString(36).slice(2);
---

<div id={id} class="relative h-[80vh] w-full overflow-hidden">
  {images.length > 0 ? (
    <img id={`${id}-img`} src={images[0]} alt="Hero"
         class="absolute inset-0 h-full w-full object-cover" loading="eager" />
  ) : (
    <div class="flex h-full items-center justify-center bg-gray-200">Sin im√°genes</div>
  )}
  <div class="absolute inset-0 bg-black/40"></div>
</div>

<script>
  const images = JSON.parse({JSON.stringify(images)});
  const id = {JSON.stringify(id)};
  const interval = {interval};

  if (images.length > 1) {
    let i = 0;
    setInterval(() => {
      i = (i + 1) % images.length;
      const el = document.getElementById(id + "-img");
      if (el) el.src = images[i];
    }, interval);
  }
</script>
